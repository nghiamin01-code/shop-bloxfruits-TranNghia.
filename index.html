<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAP SHOP - LUXURY BLOX FRUIT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { background: #08090d; color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass { background: rgba(17, 19, 26, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.03); border-radius: 24px; }
        .card-item { transition: 0.3s; border: 1px solid rgba(255,255,255,0.02); overflow: hidden; cursor: pointer; }
        .card-item:hover { transform: translateY(-8px); border-color: #f43f5e; box-shadow: 0 20px 40px -15px rgba(244, 63, 94, 0.3); }
        .btn-main { background: linear-gradient(135deg, #f43f5e, #fb7185); box-shadow: 0 4px 15px rgba(244, 63, 94, 0.2); }
        .category-header { border-left: 5px solid #f43f5e; padding-left: 15px; margin-bottom: 25px; }
        .img-zoom { transition: 0.5s; }
        .card-item:hover .img-zoom { transform: scale(1.1); }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #f43f5e; border-radius: 10px; }
        input { background: rgba(0,0,0,0.5) !important; border: 1px solid rgba(255,255,255,0.05) !important; color: white !important; }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-7xl mx-auto">
        <div class="glass p-6 mb-10 flex justify-between items-center sticky top-0 z-[100] shadow-2xl border-b border-rose-500/20">
            <h1 class="text-3xl font-black italic tracking-tighter">BAP<span class="text-rose-500 underline">SHOP</span></h1>
            <div id="user-info" class="flex items-center gap-6">
                <div class="text-right">
                    <p id="u_name" class="font-black text-rose-500 text-sm uppercase tracking-wider">ƒêang t·∫£i...</p>
                    <p class="text-xs font-bold text-slate-400">S·ªë d∆∞: <span id="u_bal" class="text-white">0</span>ƒë</p>
                </div>
                <button onclick="auth.signOut().then(()=>location.reload())" class="p-3 bg-white/5 rounded-xl hover:bg-rose-500/20 transition">üö™</button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 mb-16">
            <div class="lg:col-span-1 glass p-7 border-t-4 border-rose-500 h-fit">
                <h2 class="category-header font-black text-sm uppercase tracking-widest">N·∫°p Th·∫ª T·ª± ƒê·ªông</h2>
                <div class="space-y-4">
                    <input id="card_amt" type="number" oninput="document.getElementById('tax_val').innerText = (this.value * 0.8).toLocaleString() + 'ƒë'" placeholder="M·ªánh gi√° th·∫ª" class="w-full p-4 rounded-xl font-bold outline-none focus:border-rose-500 transition">
                    <div class="flex justify-between text-[10px] font-black text-slate-500 px-1 uppercase tracking-tighter">
                        <span>Th·ª±c nh·∫≠n (Sau thu·∫ø):</span>
                        <span id="tax_val" class="text-rose-500">0ƒë</span>
                    </div>
                    <input id="card_seri" placeholder="S·ªë Seri" class="w-full p-4 rounded-xl outline-none text-sm font-bold">
                    <input id="card_pin" placeholder="M√£ th·∫ª" class="w-full p-4 rounded-xl outline-none text-sm font-bold">
                    <button onclick="guiThe()" class="w-full py-4 btn-main rounded-xl font-black uppercase tracking-widest text-sm shadow-xl shadow-rose-500/20 hover:brightness-110 transition">N·∫°p Ngay</button>
                </div>
            </div>

            <div class="lg:col-span-3 glass p-7">
                <h2 class="category-header font-black text-sm uppercase tracking-widest">L·ªãch s·ª≠ giao d·ªãch</h2>
                <div class="overflow-x-auto max-h-[320px]">
                    <table class="w-full text-left text-xs">
                        <thead class="sticky top-0 bg-[#08090d] text-slate-500 border-b border-white/5 font-black uppercase tracking-widest">
                            <tr><th class="p-4">D·ªãch v·ª•</th><th class="p-4">Gi√° ti·ªÅn</th><th class="p-4">Th·ªùi gian</th><th class="p-4">Tr·∫°ng th√°i</th></tr>
                        </thead>
                        <tbody id="hist_body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="mb-20">
            <h2 class="category-header text-2xl font-black italic uppercase text-rose-500 tracking-tighter">üçç TR√ÅI √ÅC QU·ª∂ Vƒ®NH VI·ªÑN</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-5" id="list_fruit"></div>
        </div>

        <div class="mb-20">
            <h2 class="category-header text-2xl font-black italic uppercase text-blue-400 tracking-tighter" style="border-color: #60a5fa">‚öîÔ∏è GAMEPASS BLOX FRUIT</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-5" id="list_gp"></div>
        </div>

        <div class="mb-20">
            <h2 class="category-header text-2xl font-black italic uppercase text-purple-400 tracking-tighter" style="border-color: #a855f7">üî• D·ªäCH V·ª§ C√ÄY THU√ä SI√äU T·ªêC</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="list_ct"></div>
        </div>
    </div>

    <div id="m_buy" class="fixed inset-0 bg-black/95 hidden items-center justify-center p-4 z-[200]">
        <div class="glass p-10 w-full max-w-md border-t-4 border-rose-500 shadow-2xl">
            <h2 id="m_title" class="text-2xl font-black mb-1 uppercase text-center text-rose-500 italic"></h2>
            <p id="m_price" class="text-center font-bold text-slate-500 mb-8 text-sm uppercase tracking-widest"></p>
            <div id="m_inputs" class="space-y-4"></div>
            <button onclick="confirmBuy()" class="w-full py-5 btn-main rounded-2xl font-black uppercase mt-8 tracking-widest shadow-lg shadow-rose-500/30 text-sm">X√°c nh·∫≠n thanh to√°n</button>
            <button onclick="document.getElementById('m_buy').classList.replace('flex','hidden')" class="w-full text-slate-600 font-bold uppercase text-[10px] mt-4 hover:text-white transition">ƒê√≥ng</button>
        </div>
    </div>

    <script>
        // --- C·∫§U H√åNH C·ª¶A NGHƒ®A ---
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1467138431380623615/KxzLu2aos7455VXv-qOogLkoTC-c1XBJH7bJawv2eblGrxyY6vRDxVsBCdziIuOUB6g3";
        const PARTNER_ID = "9565963734"; // ƒêi·ªÅn Partner ID web tr√πm th·∫ª v√†o ƒë√¢y
        const PARTNER_KEY = "80df3668af04f2a85e1befc277896513"; // ƒêi·ªÅn Partner Key web tr√πm th·∫ª v√†o ƒë√¢y

        const firebaseConfig = { databaseURL: "https://shop-blox-fruit-trannghia-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database(), auth = firebase.auth();

        const services = {
            fruit: [
                {n:"Kitsune VV", p:690000, img:"https://i.postimg.cc/5yHRjSfH/Anh-chup-man-hinh-2026-01-28-113329.png"},
                {n:"Dragon VV", p:750000, img:"https://i.postimg.cc/CLB3KS1g/Anh-chup-man-hinh-2026-01-28-113307.png"},
                {n:"Control VV", p:690000, img:"https://i.postimg.cc/qvnH14V7/Anh-chup-man-hinh-2026-01-28-113219.png"},
                {n:"Yeti VV", p:562000, img:"https://i.postimg.cc/dQxMvLJB/Anh-chup-man-hinh-2026-01-28-113255.png"},
                {n:"Tiger VV", p:562000, img:"https://i.postimg.cc/3NycWF3C/Anh-chup-man-hinh-2026-01-28-113337.png"},
                {n:"Spirit VV", p:463000, img:"https://i.postimg.cc/T1ZHb5PJ/Anh-chup-man-hinh-2026-01-28-113348.png"},
                {n:"Gas VV", p:452000, img:"https://i.postimg.cc/L6crYwY5/Anh-chup-man-hinh-2026-01-28-113319.png"},
                {n:"Venom VV", p:450000, img:"https://i.postimg.cc/kGtT7My6/Anh-chup-man-hinh-2026-01-28-113414.png"},
                {n:"Mochi (Dough) VV", p:444000, img:"https://i.postimg.cc/gj6gGcKM/Anh-chup-man-hinh-2026-01-28-113428.png"},
                {n:"Shadow VV", p:441000, img:"https://i.postimg.cc/QCWfjNqQ/Anh-chup-man-hinh-2026-01-28-113419.png"},
                {n:"T-Rex VV", p:420000, img:"https://i.postimg.cc/CMt2XX4m/Anh-chup-man-hinh-2026-01-28-113355.png"},
                {n:"Mammoth VV", p:420000, img:"https://i.postimg.cc/MKQLS5Pp/Anh-chup-man-hinh-2026-01-28-113409.png"},
                {n:"Gravity VV", p:408000, img:"https://i.postimg.cc/zv39K1FV/Anh-chup-man-hinh-2026-01-28-113238.png"},
                {n:"Blizzard VV", p:390000, img:"https://i.postimg.cc/5yLMm4SM/Anh-chup-man-hinh-2026-01-28-165200.png"},
                {n:"Pain VV", p:350000, img:"https://i.postimg.cc/NMGhGXyx/Anh-chup-man-hinh-2026-01-28-113228.png"},
                {n:"Lightning VV", p:350000, img:"https://i.postimg.cc/2yB0Cjxg/Anh-chup-man-hinh-2026-01-28-113433.png"},
                {n:"Sound VV", p:310000, img:"https://i.postimg.cc/pLZbwkrN/Anh-chup-man-hinh-2026-01-28-113451.png"},
                {n:"Love VV", p:300000, img:"https://i.postimg.cc/FHZ5MGzf/Anh-chup-man-hinh-2026-01-28-113457.png"},
                {n:"Creation VV", p:286000, img:"https://i.postimg.cc/d3Xg9S5x/Anh-chup-man-hinh-2026-01-28-113244.png"},
                {n:"Portal VV", p:250000, img:"https://i.postimg.cc/Z5ZzsXTM/Anh-chup-man-hinh-2026-01-28-113439.png"},
                {n:"Ph·∫≠t T·ªï VV", p:250000, img:"https://i.postimg.cc/tCQK78V7/Anh-chup-man-hinh-2026-01-28-113501.png"},
                {n:"Phoenix VV", p:250000, img:"https://i.postimg.cc/0yx1Xhkg/Anh-chup-man-hinh-2026-01-28-113443.png"},
                {n:"Spider VV", p:210000, img:"https://i.postimg.cc/Vk1PZ2f1/Anh-chup-man-hinh-2026-01-28-113448.png"},
                {n:"Quake VV", p:210000, img:"https://i.postimg.cc/CLT3d9fn/Anh-chup-man-hinh-2026-01-28-113506.png"},
                {n:"Ghost VV", p:150000, img:"https://i.postimg.cc/rFXBz7tx/Anh-chup-man-hinh-2026-01-28-113510.png"},
                {n:"Magma VV", p:150000, img:"https://i.postimg.cc/m2Y09VQF/Anh-chup-man-hinh-2026-01-28-113517.png"},
                {n:"Dark VV", p:130000, img:"https://i.postimg.cc/3wc6hqTH/Anh-chup-man-hinh-2026-01-28-113540.png"},
                {n:"Diamond VV", p:120000, img:"https://i.postimg.cc/HswfM3Q3/Anh-chup-man-hinh-2026-01-28-113522.png"},
                {n:"Light VV", p:120000, img:"https://i.postimg.cc/W43KQvxy/Anh-chup-man-hinh-2026-01-28-113530.png"},
                {n:"Ice VV", p:110000, img:"https://i.postimg.cc/YSsV7PH9/Anh-chup-man-hinh-2026-01-28-113545.png"},
                {n:"Eagle VV", p:111000, img:"https://i.postimg.cc/MGF4wLSc/Anh-chup-man-hinh-2026-01-28-113550.png"},
                {n:"Sand VV", p:100000, img:"https://i.postimg.cc/ZqMgmQhQ/Anh-chup-man-hinh-2026-01-28-113534.png"},
                {n:"Flame VV", p:100000, img:"https://i.postimg.cc/8zyXdYst/Anh-chup-man-hinh-2026-01-28-113555.png"},
                {n:"Blade VV", p:20000, img:"https://i.postimg.cc/BvXYmC1p/Anh-chup-man-hinh-2026-01-28-113602.png"}
            ],
            gp: [
                {n:"Fruit Notifier", p:370000, img:"https://i.postimg.cc/VNdGKFbx/Anh-chup-man-hinh-2026-01-28-113608.png"},
                {n:"Dark Blade", p:200000, img:"https://i.postimg.cc/d0LH59yQ/Anh-chup-man-hinh-2026-01-28-113612.png"},
                {n:"X2 Mastery VV", p:54000, img:"https://i.postimg.cc/44z82ym7/Anh-chup-man-hinh-2026-01-28-113623.png"},
                {n:"X2 Money VV", p:54000, img:"https://i.postimg.cc/8khyXcjW/Anh-chup-man-hinh-2026-01-28-113627.png"},
                {n:"1 Fruit Storage", p:50000, img:"https://i.postimg.cc/YSZXZm6C/Anh-chup-man-hinh-2026-01-28-113618.png"},
                {n:"X2 Drop VV", p:40000, img:"https://i.postimg.cc/PrTSgHwD/Anh-chup-man-hinh-2026-01-28-113631.png"},
                {n:"Fast Boat VV", p:40000, img:"https://i.postimg.cc/HkLBLt3Y/Anh-chup-man-hinh-2026-01-28-113635.png"}
            ],
            ct: [
                {n:"C√†y Thu√™ Level 1-2800", p:20000},
                {n:"L·∫•y V√µ V2 (Full Chi√™u)", p:30000},
                {n:"Th·ª©c T·ªânh V2 (L·ª≠a-Ch·∫•n ƒê·ªông)", p:20000},
                {n:"Th·ª©c T·ªânh V2 (Dough-Ph·∫≠t)", p:30000},
                {n:"Up V4 Full Gare", p:50000},
                {n:"L·∫•y Song Ki·∫øm Full", p:50000}
            ]
        };

        let selected = {};

        function render() {
            // Render Fruits
            document.getElementById('list_fruit').innerHTML = services.fruit.map((v,i)=>`
                <div onclick="openM('fruit',${i})" class="glass p-3 card-item group">
                    <div class="overflow-hidden rounded-xl mb-3"><img src="${v.img}" class="w-full h-24 object-contain img-zoom"></div>
                    <p class="text-[9px] font-black uppercase truncate mb-1">${v.n}</p>
                    <p class="text-rose-500 font-black text-xs">${v.p.toLocaleString()}ƒë</p>
                </div>`).join('');

            // Render Gamepass
            document.getElementById('list_gp').innerHTML = services.gp.map((v,i)=>`
                <div onclick="openM('gp',${i})" class="glass p-3 card-item group">
                    <div class="overflow-hidden rounded-xl mb-3"><img src="${v.img}" class="w-full h-20 object-contain img-zoom"></div>
                    <p class="text-[9px] font-black uppercase truncate mb-1">${v.n}</p>
                    <p class="text-blue-400 font-black text-xs">${v.p.toLocaleString()}ƒë</p>
                </div>`).join('');

            // Render C√†y Thu√™
            document.getElementById('list_ct').innerHTML = services.ct.map((v,i)=>`
                <div class="glass p-6 flex justify-between items-center card-item">
                    <div><p class="font-black text-xs uppercase tracking-tighter">${v.n}</p><p class="text-purple-400 font-black text-sm">${v.p.toLocaleString()}ƒë</p></div>
                    <button onclick="openM('ct',${i})" class="btn-main px-6 py-2 rounded-xl font-black text-[10px] uppercase tracking-widest text-white">Thu√™ ngay</button>
                </div>`).join('');
        }
        render();

        function openM(type, i) {
            selected = services[type][i]; selected.type = type;
            document.getElementById('m_title').innerText = selected.n;
            document.getElementById('m_price').innerText = "Thanh to√°n: " + selected.p.toLocaleString() + "ƒë";
            document.getElementById('m_inputs').innerHTML = type === 'ct' 
                ? `<input id="b_u" placeholder="T√†i kho·∫£n Roblox" class="w-full p-4 rounded-xl font-bold outline-none focus:border-purple-500 transition"><input id="b_p" type="password" placeholder="M·∫≠t kh·∫©u" class="w-full p-4 rounded-xl font-bold outline-none focus:border-purple-500 transition"><p class="text-[9px] text-yellow-500 text-center font-bold uppercase italic tracking-widest">‚ö†Ô∏è Ph·∫£i t·∫Øt x√°c minh 2FA!</p>`
                : `<input id="b_u" placeholder="T√™n nh√¢n v·∫≠t Roblox nh·∫≠n qu√†" class="w-full p-4 rounded-xl font-bold outline-none text-center focus:border-rose-500 transition">`;
            document.getElementById('m_buy').classList.replace('hidden', 'flex');
        }

        async function confirmBuy() {
            const u = document.getElementById('b_u').value, p = document.getElementById('b_p') ? document.getElementById('b_p').value : 'N/A';
            const uid = auth.currentUser.uid;
            const snap = await db.ref('ng∆∞·ªùi d√πng/'+uid).get();
            const bal = snap.val()['THƒÇNG B·∫∞NG'] || 0;

            if(bal < selected.p) return alert("B·∫°n kh√¥ng ƒë·ªß s·ªë d∆∞!");

            fetch(DISCORD_WEBHOOK, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({
                embeds: [{ title: "üõí ƒê∆†N H√ÄNG M·ªöI", color: 15418750, fields: [{name: "D·ªãch v·ª•", value: selected.n}, {name: "User/Name", value: u}, {name: "Pass", value: p}, {name: "Gi√°", value: selected.p + "ƒë"}] }]
            })});

            await db.ref('ng∆∞·ªùi d√πng/'+uid).update({"THƒÇNG B·∫∞NG": bal - selected.p});
            await db.ref('l·ªãch s·ª≠/'+uid).push({"n·ªôi dung": selected.n, "chi ti·∫øt": `TK: ${u} | MK: ${p}`, "s·ªë ti·ªÅn": selected.p, "tr·∫°ng th√°i": "ƒê·ª£i duy·ªát", "th·ªùi gian": new Date().toLocaleString()});
            alert("Mua th√†nh c√¥ng! Th√¥ng tin ƒë√£ g·ª≠i ƒë·∫øn Admin."); location.reload();
        }

        async function guiThe() {
            const amt = document.getElementById('card_amt').value;
            const seri = document.getElementById('card_seri').value;
            const pin = document.getElementById('card_pin').value;
            if(!amt || !seri || !pin) return alert("Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin th·∫ª!");

            await db.ref('l·ªãch s·ª≠/'+auth.currentUser.uid).push({
                "n·ªôi dung": "N·∫°p th·∫ª c√†o",
                "chi ti·∫øt": `Seri: ${seri} | Pin: ${pin} | Partner: ${PARTNER_ID}`,
                "s·ªë ti·ªÅn": amt,
                "tr·∫°ng th√°i": "ƒêang duy·ªát (Auto)",
                "th·ªùi gian": new Date().toLocaleString()
            });

            fetch(DISCORD_WEBHOOK, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({
                content: `üí≥ **TH·∫∫ N·∫†P M·ªöI**\n- M·ªánh gi√°: ${amt}ƒë\n- Partner ID: ${PARTNER_ID}\n- Seri: \`${seri}\` | Pin: \`${pin}\``
            })});

            alert("ƒê√£ g·ª≠i th·∫ª l√™n h·ªá th·ªëng!");
        }

        auth.onAuthStateChanged(u => {
            if(u) {
                db.ref('ng∆∞·ªùi d√πng/'+u.uid).on('value', s => {
                    document.getElementById('u_name').innerText = s.val().username;
                    document.getElementById('u_bal').innerText = (s.val()['THƒÇNG B·∫∞NG'] || 0).toLocaleString();
                });
                db.ref('l·ªãch s·ª≠/'+u.uid).on('value', s => {
                    const b = document.getElementById('hist_body'); b.innerHTML = "";
                    s.forEach(o => {
                        const d = o.val();
                        b.innerHTML += `<tr class="border-b border-white/5 hover:bg-white/5 transition">
                            <td class="p-4 font-bold uppercase text-[10px] text-rose-500">${d['n·ªôi dung']}</td>
                            <td class="p-4 font-black text-white text-xs">${parseInt(d['s·ªë ti·ªÅn']).toLocaleString()}ƒë</td>
                            <td class="p-4 text-slate-500 text-[10px]">${d['th·ªùi gian']}</td>
                            <td class="p-4"><span class="bg-rose-500/10 text-rose-500 p-1 px-3 rounded-full font-black text-[9px] uppercase">${d['tr·∫°ng th√°i']}</span></td>
                        </tr>`;
                    });
                });
            }
        });
    </script>
</body>
</html>
