// --- CHá»¨C NÄ‚NG DUYá»†T ÄÆ N VÃ€ Cá»˜NG TIá»€N CHO ADMIN ---

// 1. Duyá»‡t Náº¡p Bank/QR: Báº¥m lÃ  cá»™ng tiá»n cho khÃ¡ch
async function duyetNáº¡pBank(uid, key, soTien) {
    if (confirm("XÃ¡c nháº­n Ä‘Ã£ nháº­n tiá»n vÃ  cá»™ng " + soTien + "Ä‘ cho khÃ¡ch?")) {
        const userRef = db.ref('users/' + uid);
        const snap = await userRef.get();
        const currentBal = snap.val().balance || 0;
        
        // Tiáº¿n hÃ nh cá»™ng tiá»n vÃ o tÃ i khoáº£n
        await userRef.update({ balance: currentBal + parseInt(soTien) });
        
        // Äá»•i tráº¡ng thÃ¡i Ä‘Æ¡n náº¡p thÃ nh ThÃ nh cÃ´ng
        await db.ref('history/' + uid + '/' + key).update({ status: "ThÃ nh cÃ´ng" });
        
        alert("âœ… ÄÃ£ duyá»‡t vÃ  cá»™ng tiá»n thÃ nh cÃ´ng!");
        location.reload();
    }
}

// 2. Duyá»‡t ÄÆ¡n CÃ y ThuÃª: Äá»•i tráº¡ng thÃ¡i khi báº¡n Ä‘Ã£ cÃ y xong
async function hoanThanhCayThue(uid, key) {
    if (confirm("XÃ¡c nháº­n Ä‘Ã£ cÃ y xong Ä‘Æ¡n nÃ y?")) {
        await db.ref('history/' + uid + '/' + key).update({ status: "HoÃ n thÃ nh" });
        alert("ğŸš€ ÄÃ£ cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng!");
        location.reload();
    }
}

// 3. Hiá»ƒn thá»‹ danh sÃ¡ch cho Admin (HÃ m máº«u Ä‘á»• dá»¯ liá»‡u)
function renderAdminOrders(orders) {
    // Duyá»‡t qua danh sÃ¡ch Ä‘Æ¡n hÃ ng vÃ  táº¡o nÃºt báº¥m
    // NÃºt Duyá»‡t Bank: <button onclick="duyetNáº¡pBank('${uid}', '${key}', ${item.amount})">Duyá»‡t</button>
}
